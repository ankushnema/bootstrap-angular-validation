"use strict";angular.module("bootstrap.angular.validation",[]),angular.module("bootstrap.angular.validation").config(["$httpProvider",function(a){var b=["$rootScope","BsValidationService",function(a,b){return{response:function(a){if(b.checkNgIncludedURL(a.config.url)){var c=angular.element(document.createElement("div"));c.append(a.data),b.addDirective(c),a.data=c.html()}return a}}}];a.interceptors.push(b)}]),angular.module("bootstrap.angular.validation").provider("bsValidationConfig",function(){function a(a){return angular.isString(b)?b===a:-1!==b.indexOf(a)}var b="blur",c="simple",d=this;d.displayErrorsAs="simple",d.addSuccessClass=!0,d.setValidateFieldsOn=function(a){if(!a)throw"Please provide an string or list of events to validate fields on";if(!angular.isString(a)&&!angular.isArray(a))throw"Event should either be a string or a list";b=a},d.setDisplayErrorsAs=function(a){if(!a)throw'Please provide the way validation error should be displayed. In-built options are "simple" & "tooltip".';c=a},d.$get=[function(){return{getDisplayErrorsAs:function(){return c},shouldAddSuccessClass:function(){return d.addSuccessClass},shouldValidateOnBlur:function(){return a("blur")},shouldValidateOnSubmit:function(){return a("submit")},shouldValidateOnDisplay:function(){return a("display")}}}]}),angular.module("bootstrap.angular.validation").directive("form",["$parse","$rootScope","BsValidationService",function(a,b,c){return{restrict:"E",require:"form",priority:1e3,compile:function(b,d){b.attr("novalidate","novalidate"),c.addDirective(b);var e=b.findAll("[ng-include]");if(e.length>0){var f=a(e.attr("ng-include"))();c.addToNgIncludedURLs(f)}var g=d.ngSubmit;delete d.ngSubmit;var h=function(b,c,d,e){e.$validate=function(){e.$setSubmitted()},c.on("submit",function(d){if(d.preventDefault(),e.$invalid)return c[0].querySelector(".ng-invalid").focus(),!1;var f=a(g);return b.$apply(function(){f(b,{$event:d}),e.$commitViewValue(),e.$setSubmitted(),e.$setPristine()}),d.stopImmediatePropagation(),!1})};return{pre:h}}}}]),angular.module("bootstrap.angular.validation").directive("bsValidation",["$interpolate","$timeout","$injector","BsValidationService","bsValidationConfig",function(a,b,c,d,e){return{restrict:"A",require:["ngModel","?^^form"],link:function(a,c,f,g){function h(){v.hideErrorMessage(o)}function i(){o.removeClass("has-success")}function j(){return d.addErrorClass(o),v.showErrorMessage(c,f,m,o),!1}function k(){return o.addClass("has-success"),h()}function l(){return p||(i(),h()),m.$valid?k():m.$invalid?j():void 0}var m=g[0],n=g[1],o=d.getFormGroupElement(c);if(!o)throw"No parent form group element found for input element";var p=!1,q=e.shouldValidateOnBlur(),r=e.shouldValidateOnDisplay(),s=e.shouldValidateOnSubmit(),t=d.getMetaInformation(c),u=d.displayErrorPreference(c,f),v=d.getValidationMessageService(u);if(angular.forEach(d.getValidators(),function(b){var e=c.attr(b);(f[b]||angular.isDefined(e)&&e!==!1)&&d.addValidator(a,f,m,b,t)}),r&&(p=!0,m.$validate(),b(function(){l()})),q)var w=a.$watch(function(){return m.$touched},function(a){a&&(p=!0,l(),w())});s&&n&&a.$watch(function(){return n.$submitted},function(a){p=a,l()}),m.$viewChangeListeners.push(function(){l()})}}}]),angular.module("bootstrap.angular.validation").factory("simpleMessageService",["BsValidationService",function(a){function b(a,b,c){var d,e=b.findOne(".input-group");d=e.length>0?e:a,c='<span class="'+f+'">'+g+c+"</span>",d.after(c)}var c=".bs-invalid-msg",d=".help-block",e=[c.substring(1),d.substring(1)],f=e.join(" "),g='<i class="fa fa-exclamation-triangle fa-fw"></i>';return{hideErrorMessage:function(a){a.removeClass("has-error"),a.findAll("span."+e.join(".")).addClass("ng-hide")},resolveMessage:function(b,c,d){return a.resolveMessage(b,c,d)},showErrorMessage:function(a,d,e,f){var h=Object.keys(e.$error)[0],i=this.resolveMessage(a,d,h),j=f.findOne(c);0===j.length&&b(a,f,i),j.html(g+i).removeClass("ng-hide")}}}]),angular.module("bootstrap.angular.validation").factory("BsValidationService",["$interpolate","bsValidationConfig","$injector",function(a,b,c){var d="bsDisplayErrorAs",e="[bs-form-group]",f=".form-group",g={required:"This field is required.",email:"Please enter a valid email address.",strictemail:"Please enter a valid email address.",url:"Please enter a valid URL.",number:"Please enter a valid number.",digits:"Please enter only digits.",min:"Please enter a value greater than or equal to {{validValue}}.",max:"Please enter a value less than or equal to {{validValue}}.",length:"Please enter all {{validValue}} characters.",minlength:"Please enter at least {{validValue}} characters.",maxlength:"Please enter no more than {{validValue}} characters.",editable:"Please select a value from dropdown.",pattern:"Please fix the pattern.",equalto:"must match {{matchName}}."},h=[],i={digits:function(a){return/^\d+$/.test(a)},equalto:function(a,b,c){return a+""==c.equalto+""},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},min:function(a,b,c){return parseFloat(a)>=parseFloat(c.min)},max:function(a,b,c){return parseFloat(a)<=parseFloat(c.max)},length:function(a,b,c){return a.length===parseInt(c.length)},strictemail:function(a){return new RegExp(/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/).test(a)}},j=[],k=["input","select","textarea"];angular.forEach(k,function(a){j.push(a+"[ng-model]"),j.push(a+"[data-ng-model]")});var l=j.join(",");return{getValidators:function(){var a=["equalto","min","max","number","digits","length"],b=Object.keys(i);return a.concat(b)},getMeta:function(){return["matchName"]},getMetaInformation:function(a){var b={};return angular.forEach(this.getMeta(),function(c){b[c]=a.attr(c)}),b},addDirective:function(a){var b=a.findAll(l);return b.attr("bs-validation",""),b},addErrorClass:function(a){a.removeClass("has-success"),a.addClass("has-error")},addToNgIncludedURLs:function(a){-1===h.indexOf(a)&&h.push(a)},addValidator:function(a,b,c,d){c.$validators[d]=function(e,f){var g=e||f;return c.$isEmpty(g)||i[d](g,a,b)}},checkNgIncludedURL:function(a){var b=h.indexOf(a);return b>-1?(h.splice(b,1),!0):!1},displayErrorPreference:function(a,c){if(c[d])return c[d];var e=a.parent("form");return e&&e.attr(d)?e.attr(d):b.getDisplayErrorsAs()},getDefaultMessage:function(a){return g[a]},getFormGroupElement:function(a){var b=a.parents(f);return b&&0!==b.length||(b=a.parents(e),b&&0!==b.length)?b:null},getValidationMessageService:function(a){var b;try{b=c.get(a+"MessageService")}catch(d){throw"No message service found for type ["+a+"]."}if("tooltip"===a&&!c.has("$uibPosition"))throw"$uibPosition service required from the ui-bootstrap module in order to use the tooltip message.";return b},resolveMessage:function(b,c,d){var e=this.getMetaInformation(b),f=b.attr(d+"-notification")||this.getDefaultMessage(d),g=angular.extend({},{validValue:c[d]},e);return a(f)(g)}}}]),angular.element.prototype.findOne=function(a){return angular.element(this[0].querySelector(a))},angular.element.prototype.findAll=function(a){return angular.element(this[0].querySelectorAll(a))},angular.element.prototype.parents=function(a){for(var b=!!document.documentMode,c=this[0],d=[];c.parentNode.parentNode;)c=c.parentNode,a?b?c.msMatchesSelector(a)&&d.push(c):c.matches(a)&&d.push(c):d.push(c);return angular.element(d)};