"use strict";angular.module("bootstrap.angular.validation",[]),angular.module("bootstrap.angular.validation").config(["$httpProvider",function(a){var b=["$rootScope","BsValidationService",function(a,b){return{response:function(a){if(b.checkNgIncludedURL(a.config.url)){var c=angular.element(document.createElement("div"));c.append(a.data),b.addDirective(c),a.data=c.html()}return a}}}];a.interceptors.push(b)}]),angular.module("bootstrap.angular.validation").provider("bsValidationConfig",function(){function a(a){return angular.isString(b)?b===a:-1!==b.indexOf(a)}var b="blur",c=this;c.displayErrorsAs="simple",c.addSuccessClass=!0,c.setValidateFieldsOn=function(a){if(!a)throw"Please provide an string or list of events to validate fields on";if(!angular.isString(a)&&!angular.isArray(a))throw"Event should either be a string or a list";b=a},c.$get=[function(){return{shouldAddSuccessClass:function(){return c.addSuccessClass},shouldValidateOnBlur:function(){return a("blur")},shouldValidateOnSubmit:function(){return a("submit")},shouldValidateOnDisplay:function(){return a("display")}}}]}),angular.module("bootstrap.angular.validation").directive("form",["$parse","$rootScope","BsValidationService",function(a,b,c){return{restrict:"E",require:"form",priority:1e3,compile:function(b,d){b.attr("novalidate","novalidate"),c.addDirective(b);var e=b.findAll("[ng-include]");if(e.length>0){var f=a(e.attr("ng-include"))();c.addToNgIncludedURLs(f)}var g=d.ngSubmit;delete d.ngSubmit;var h=function(b,c,d,e){e.$validate=function(){e.$setSubmitted()},c.on("submit",function(d){if(d.preventDefault(),e.$invalid)return c[0].querySelector(".ng-invalid").focus(),!1;var f=a(g);return b.$apply(function(){f(b,{$event:d}),e.$commitViewValue(),e.$setSubmitted(),e.$setPristine()}),d.stopImmediatePropagation(),!1})};return{pre:h}}}}]),angular.module("bootstrap.angular.validation").directive("bsValidation",["$interpolate","$timeout","BsValidationService","bsValidationConfig",function(a,b,c,d){return{restrict:"A",require:["ngModel","?^^form"],link:function(e,f,g,h){function i(b){var d=f.attr(b+"-notification")||c.getDefaultMessage(b),e=angular.extend({},{validValue:g[b]},G);return a(d)(e)}function j(){return B.removeClass("has-error"),B.length>0&&B.findAll("span."+z.join(".")).addClass("ng-hide"),!1}function k(){B.removeClass("has-success")}function l(){return n(),q(),!1}function m(){return B.addClass("has-success"),j()}function n(){B.removeClass("has-success"),B.addClass("has-error")}function o(a){return'<span class="'+A+'">'+v+a+"</span>"}function p(a){var b=f,c=B.findOne(".input-group");c.length>0&&(b=c),b.after(o(a))}function q(){var a=i(Object.keys(s.$error)[0]),b=B.findOne("."+u);0===b.length&&p(a),b.html(v+a).removeClass("ng-hide")}function r(){return C?s.$valid?m():s.$invalid?l():void 0:(k(),j())}var s=h[0],t=h[1],u="bs-invalid-msg",v='<i class="fa fa-exclamation-triangle fa-fw"></i>',w=".form-group",x="[bs-form-group]",y="help-block",z=[u,y],A=z.join(" "),B=f.parents(w);if(B&&0!==B.length||(B=f.parents(x),B&&0!==B.length)){var C=!1,D=d.shouldValidateOnBlur(),E=d.shouldValidateOnDisplay(),F=d.shouldValidateOnSubmit(),G={};if(angular.forEach(c.getMeta(),function(a){G[a]=f.attr(a)}),angular.forEach(c.getValidators(),function(a){var b=f.attr(a);(g[a]||angular.isDefined(b)&&b!==!1)&&c.addValidator(e,g,s,a,G)}),E&&(C=!0,s.$validate(),b(function(){r()})),D)var H=e.$watch(function(){return s.$touched},function(a){a&&(C=!0,r(),H())});F&&t&&e.$watchCollection(function(){return t.$submitted},function(a){C=a,r()}),s.$viewChangeListeners.push(function(){r()})}}}}]),angular.module("bootstrap.angular.validation").factory("BsValidationService",function(){var a={required:"This field is required.",email:"Please enter a valid email address.",strictemail:"Please enter a valid email address.",url:"Please enter a valid URL.",number:"Please enter a valid number.",digits:"Please enter only digits.",min:"Please enter a value greater than or equal to {{validValue}}.",max:"Please enter a value less than or equal to {{validValue}}.",length:"Please enter all {{validValue}} characters.",minlength:"Please enter at least {{validValue}} characters.",maxlength:"Please enter no more than {{validValue}} characters.",editable:"Please select a value from dropdown.",pattern:"Please fix the pattern.",equalto:"must match {{matchName}}."},b=[],c={digits:function(a){return/^\d+$/.test(a)},equalto:function(a,b,c){return a+""==c.equalto+""},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},min:function(a,b,c){return parseFloat(a)>=parseFloat(c.min)},max:function(a,b,c){return parseFloat(a)<=parseFloat(c.max)},length:function(a,b,c){return a.length===parseInt(c.length)},strictemail:function(a){return new RegExp(/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/).test(a)}},d=[],e=["input","select","textarea"];angular.forEach(e,function(a){d.push(a+"[ng-model]"),d.push(a+"[data-ng-model]")});var f=d.join(",");return{getValidators:function(){var a=["equalto","min","max","number","digits","length"],b=Object.keys(c);return a.concat(b)},getMeta:function(){return["matchName"]},addDirective:function(a){var b=a.findAll(f);return b.attr("bs-validation",""),b},addToNgIncludedURLs:function(a){-1===b.indexOf(a)&&b.push(a)},addValidator:function(a,b,d,e){d.$validators[e]=function(f,g){var h=f||g;return d.$isEmpty(h)||c[e](h,a,b)}},checkNgIncludedURL:function(a){var c=b.indexOf(a);return c>-1?(b.splice(c,1),!0):!1},getDefaultMessage:function(b){return a[b]}}}),angular.element.prototype.findOne=function(a){return angular.element(this[0].querySelector(a))},angular.element.prototype.findAll=function(a){return angular.element(this[0].querySelectorAll(a))},angular.element.prototype.parents=function(a){for(var b=!!document.documentMode,c=this[0],d=[];c.parentNode.parentNode;)c=c.parentNode,a?b?c.msMatchesSelector(a)&&d.push(c):c.matches(a)&&d.push(c):d.push(c);return angular.element(d)};